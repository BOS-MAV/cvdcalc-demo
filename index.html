<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="favicon.ico">
        <!-- jQuery and Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <title>CVD Risk Calculator</title>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <style>
            .tooltip > .tooltip-inner {
                background-color: #f57b42; 
                color: #FFFFFF; 
                border: 1px #f57b42; 
                padding: 15px;
                font-size: 16px;
                width: 200px;
            }

            .ui-controlgroup-vertical {
                width: 150px;
            }
            .ui-controlgroup.ui-controlgroup-vertical > button.ui-button,
            .ui-controlgroup.ui-controlgroup-vertical > .ui-controlgroup-label {
                text-align: center;
            }
            #car-type-button {
                width: 120px;
            }
            .ui-controlgroup-horizontal .ui-spinner-input {
                width: 20px;
            }
            .btn-group button{
                background-color:white;
            }
            body {
                background-color: mintcream;
            }
            .well {
                background-color:#ccffff;
                width: 100%;
            }

            .well-sm{
                width: 100%;
            }
            .topLabel {
                display: block;
                text-align:center;
            }

            .topLabel {
                display: block;
                text-align:left;
            }
            .block-legend {
                text-align:center;
            }
            .head-center {
                text-align:center;
            }
            .btn-bottom {
                text-align:center;
            }
            .jumbotron .container{
                text-align: center;
            }
            .jumbotron {
                background-color: lightgrays;
                height: 80%;
                width: 100%;
            }
            .jumbotron .container button {
                text-align: center;
            }
            .well button {
                text-align:center;

            }
            .error{
                display: none;
                margin-left: 10px;
            }		

            .error_show{
                color: red;
                margin-left: 10px;
            }
            input.invalid, textarea.invalid{
                border: 2px solid #f57b42;
            }

            input.valid, textarea.valid{
                border: 2px solid green;
            }
            .active{
                background:red;
            }
            button.btn:active{
                background:red;
            }
        </style>
        <script>
            $(function () {
                $(".controlgroup").controlgroup()
                $(".controlgroup-vertical").controlgroup({
                    "direction": "vertical"
                });
            });
            // get selection
            $('.colors input[type=radio]').on('change', function () {
                console.log(this.value);
            });
            $("input:radio[name='thename']").each(function (i) {
                this.checked = false;
            });
            $(document).ready(function () {
                $("#txtAge").focus();
                $("#txtAge").tooltip({title: "Please enter an age between 20 and 79", placement: "bottom", trigger: "manual"});
                $("#sexMark").tooltip({title: "Please choose either Male or Female", placement: "bottom", trigger: "manual"});
                $("#raceMark").tooltip({title: "Please choose White, African American, Hispance or Other", placement: "bottom", trigger: "manual"});
                $("#BP_Sys").tooltip({title: "Please enter a systolic blood pressure between 90 and 200 mm HG", placement: "right", trigger: "manual"});
                $("#BP_Dia").tooltip({title: "Please enter a diastolic blood pressure between 60 and 130 mm HG", placement: "right", trigger: "manual"});
                $("#TotChol").tooltip({title: "Please enter total cholesterol between 130 and 320 mg/dL", placement: "bottom", trigger: "manual"});
                $("#HDL").tooltip({title: "Please enter HDL cholesterol between 20 and 100 mg/dL", placement: "bottom", trigger: "manual"});
                $("#LDL").tooltip({title: "Please enter LDL cholesterol between 30 and 300 mg/dL", placement: "bottom", trigger: "manual"});
                $(".diabetesFields").hide();


                /*$('#myForm').on('submit', function(e){
                 e.preventDefault();
                 this.submit();
                 calc_risk();
                 });*/
                $('#sub').on('click', function (event) {
                    var isvalidate = $("#myForm")[0].checkValidity();
                    if (isvalidate) {
                        event.preventDefault();
                        $('#message').html('Your score is: ' + calc_risk());
                        $('#myModal').modal('show');
                    }
                    else
                    {
                        var input = $("#txtAge");
                        if ((parseInt(input.val()) < 20 || parseInt(input.val()) > 79) || ($(input).val() === ''))
                        {
                            $(input).tooltip("show");
                            input.removeClass("valid").addClass("invalid");
                            $(input).focus();


                        }
                        else
                        {
                            $(input).tooltip("hide");
                            input.removeClass("invalid").addClass("valid");

                            if (($("input[name = 'Sex']:checked").val() != 'Male') && ($("input[name = 'Sex']:checked").val() != 'Female'))
                            {
                                $("#sexMark").tooltip("show");
                                $("#Sex").focus();
                            }
                            else
                                $("#sexMark").tooltip("hide");

                            if (($("input[name = 'Race']:checked").val() != 'White') && ($("input[name = 'Race']:checked").val() != 'African American')
                                    && ($("input[name = 'Race']:checked").val() != 'Hispanic') && ($("input[name = 'Race']:checked").val() != 'Other'))
                            {
                                $("#raceMark").tooltip("show");
                                $("#Race").focus();
                            }
                            else
                                $("#raceMark").tooltip("hide");


                        }

                    }



                });
                $("#txtAge").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');

                    if ((parseInt(input.val()) < 20 || parseInt(input.val()) > 79) || ($(this).val() === ''))
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                        $("#Sex").focus();

                        //  alert(error_element.val());
                        // error_element.removeClass("error").addClass("error_show"); 
                    }
                    /* else
                     {
                     input.removeClass("invalid").addClass("valid");
                     error_element.removeClass("error_show").addClass("error");
                     }*/
                });

                $("input[name='Sex']").change(function () {
                    $("#sexMark").tooltip("hide");
                    $("#Race").focus();
                });

                $("input[name='Race']").change(function () {
                    $("#raceMark").tooltip("hide");
                    $("#Diabetes").focus();
                });
                $("input[name='Diabetes']").change(function () {
                    if ($("input[name = 'Diabetes']:checked").val() === "Yes")
                    {
                        $(".diabetesFields").show();
                        $(".diabetesFields").attr('required', '');
                    }
                    else
                    {
                        $(".diabetesFields").hide();
                        $(".diabetesFields").removeAttr('required');
                    }
                })

                $("#BP_Sys").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');
                    if (parseInt(input.val()) < 90 || parseInt(input.val()) > 200)
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                    }
                });
                $("#BP_Dia").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');
                    if (parseInt(input.val()) < 60 || parseInt(input.val()) > 130)
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                    }
                });
                $("#TotChol").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');
                    if (parseInt(input.val()) < 130 || parseInt(input.val()) > 320)
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                    }
                });
                $("#HDL").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');
                    if (parseInt(input.val()) < 20 || parseInt(input.val()) > 100)
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                    }
                });
                $("#LDL").blur(function () {
                    var input = $(this);
                    //alert(parseInt(input.val()));
                    //var error_element=$(this).next();

                    //error_element.addClass('error_show').removeClass('error');
                    if (parseInt(input.val()) < 30 || parseInt(input.val()) > 300)
                    {
                        $(this).tooltip("show");
                        input.removeClass("valid").addClass("invalid");
                        $(this).focus();
                    }
                    else
                    {
                        $(this).tooltip("hide");
                        input.removeClass("invalid").addClass("valid");
                    }
                });
            });
            function calc_risk() {
                //declare a totscore variable

                var totScore;
                //declare variables to hold the rest
                var age, sex_t, sex, race, race_t, diabetes, diabetes_t, smoker, smoker_t, hypertension, hypertension_t, statin, statin_t, systolic, diastolic,
                        totchl, hdl, ldl;
                age = parseInt($("#txtAge").val());
                if (parseInt($("#BP_Sys").val()) > 130)
                    systolic = 2;
                else
                    systolic = -2;
                if (parseInt($("#BP_Dia").val()) > 90)
                    diastolic = -2;
                else
                    diastolic = 2;
                if (parseInt($("#TotChol").val()) > 200)
                    totchl = -2;
                else
                    totchl = 0;
                if (parseInt($("#HDL").val()) > 50)
                    hdl = -1;
                else
                    hdl = 0;
                if (parseInt($("#LDL").val()) < 50)
                    ldl = -2;
                else
                    ldl = 0;
                if ($("input[name = 'Sex']:checked").val() === "Male")
                    sex = 2;
                else
                    sex = 1;
                race_t = $("input[name = 'Race']:checked").val();
                if (race_t === 'White')
                    race = 1;
                else if (race_t === 'African American')
                    race = 2;
                else
                    race = 3;
                if ($("input[name = 'Diabetes']:checked").val() === "Yes")
                    diabetes = -1;
                else
                    diabetes = 0;
                if ($("input[name = 'Smoker']:checked").val() === "Current")
                    smoker = -3;
                else
                    smoker = 0;
                if ($("input[name = 'Hypertension']:checked").val() === "Yes")
                    hypertension = -3;
                else
                    hypertension = 0;
                if ($("input[name = 'Statin']:checked").val() === "Yes")
                    statin = -1;
                else
                    statin = 0;

                totScore = age + sex + race + diabetes + smoker + hypertension + statin + systolic + diastolic + totchl + hdl + ldl;

                return totScore;
            }

        </script>
    </head>
    <body >
        <form id ="myForm" >
            <div class ="container">
                <div class="jumbotron clearfix">
                    <h1 class = "head-center">CVD Risk Calculator</h1>
                    <div class="well well-sm">
                        <legend class = "block-legend">Demographic Information</legend>
                        <div class ="row">
                            <div class ="col-sm-3 col-med-3 col-lg-2">
                                <div class="btn-group" data-toggle="buttons" >
                                    <label class = "topLabel">Current Age</label>

                                    <div style="clear: both;"></div>
                                    <label class="btn text-input">
                                        <input type = "text" id ="txtAge" size = "2" maxlength ="2" oninput="this.value=this.value.replace(/[^0-9]/g,'');" required/>
                                        <span class="error">Range 20-79</span>		
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-3 col-med-3 col-lg-3">
                                <div class="btn-group colors" data-toggle="buttons" >
                                    <label class ="topLabel">Sex</label>
                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm" id = "sexMark"> 
                                        <input type="radio" name="Sex" value="Male" required > Male
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Sex" value="Female" required> Female
                                    </label>
                                </div>
                            </div>
                            <div class ="col-sm-6 col-med-6 col-lg-7">
                                <div class="btn-group colors" data-toggle="buttons" >
                                    <label class ="topLabel">Race</label>
                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm" id="raceMark"> 
                                        <input type="radio" name="Race" value="White" required> White
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Race" value="AfrAm" required> African American
                                    </label>
                                    <label class ="btn btn-primary btn-sm">
                                        <input type="radio" name="Race" value="Hisp" required> Hispanic
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Race" value="Other"  required> Other
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well well-sm">
                        <legend class = "block-legend">Medical History</legend>    
                        <div class ="row">
                            <div class ="col-sm-3 col-med-4 col-lg-4">
                                <div class="btn-group colors" data-toggle="buttons" id ="diab" >
                                    <label class = "topLabel">Diabetes<br/>History?</label>

                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm"> 
                                        <input type="radio" name="Diabetes" value="Yes" autocomplete="off" required > Yes
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Diabetes" value="No"  required > No
                                    </label>
                                </div>
                            </div>
                            <div class ="col-sm-3 col-med-4 col-lg-4">
                                <div class="btn-group colors" data-toggle="buttons" id ="smok" >
                                    </br>
                                    <label class = "topLabel">Smoker?</label>
                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm"> 
                                        <input type="radio" name="Smoker" value="Ever"  required> Current
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Smoker" value="Never" required> Never
                                    </label>
                                </div>
                            </div>
                            <div class ="col-sm-3 col-med-4 col-lg-4">
                                <div class="btn-group colors" data-toggle="buttons" id ="hbp" >
                                    <label class = "topLabel">Hypertension<br/>Treatment?</label>
                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm"> 
                                        <input type="radio" name="Hypertension" value="Yes"  required > Yes
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Hypertension" value="No"  required > No
                                    </label>
                                </div>
                            </div>
                            <div class ="col-sm-3 col-med-4 col-lg-4">
                                <div class="btn-group colors" data-toggle="buttons" id ="stat" >
                                    </br>
                                    <label class = "topLabel">Statin?</label>
                                    <div style="clear: both;"></div>
                                    <label class="btn btn-primary btn-sm"> 
                                        <input type="radio" name="Statin" value="Yes"  required> Yes
                                    </label>
                                    <label class="btn btn-primary btn-sm">
                                        <input type="radio" name="Statin" value="No"  required > No
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="well well-sm">
                            <legend class = "block-legend">Blood Pressure and Labs</legend>
                            <div class ="row">
                                <div class ="col-sm-6 col-med-6 col-lg-6">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel">Systolic Blood Pressure (mm Hg)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "BP_Sys" size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" required/>
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-6 col-med-6 col-lg-6">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel">Diastolic Blood Pressure (mm Hg)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "BP_Dia" size = "4" maxlength = "3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" required/>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class ="row">
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Total Cholesterol<br/>(mg/dL)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "TotChol" required size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" />
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">HDL Cholesterol<br/>(mg/dL)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "HDL" size = "2" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');"  required/>
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-3 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">LDL Cholesterol<br/>(mg/dl)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "LDL" size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');"  required/>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class ="row diabetesFields">
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Fasting Plasma Glucose<br/>(mg/dL)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "fpGluc"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" class ="diabetesFields" />
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Alanine Aminotransferase<br/>(IU/L)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "alAmint"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" class ="diabetesFields"/>
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Creatine phosphokinase<br/>(IU/L)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "creatPhos"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" class ="diabetesFields"/>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class ="row diabetesFields">
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Serum Potassium<br/>(mmol/L)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "serK"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" class ="diabetesFields"/>
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Serum Creatinine<br/>(mg/dL)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "serCreat"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');"class ="diabetesFields" />
                                        </label>
                                    </div>
                                </div>
                                <div class ="col-sm-4 col-med-4 col-lg-4">
                                    <div class="btn-group" data-toggle="buttons" >
                                        <label class = "topLabel1">Urine Albumin<br/>(mg/dL)</label>
                                        <div style="clear: both;"></div>
                                        <label class="btn text-input">
                                            <input type = "text" id = "urAlb"  size = "4" maxlength ="3" oninput="this.value=this.value.replace(/[^0-9]/g,'');" class ="diabetesFields" />
                                        </label>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12 text-center"> 
                                <button type="button" id = "sub" class="btn btn-primary btn-center text-center" >Estimate Risk</button>



                                <!-- Modal -->
                                <div class="modal fade" id="myModal" role="dialog">
                                    <div class="modal-dialog">

                                        <!-- Modal content-->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                <h4 class="modal-title">Your Results</h4>
                                            </div>
                                            <div class="modal-body">
                                                <label id ="message" class="result"></label>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div> <br/><br/><br/>Estimation of Atherosclerotic Cardiovascular Disease Risk in Veterans <a href="https://doi.org/10.1161/circ.139.suppl_1.P373" target ="_blank">https://doi.org/10.1161/circ.139.suppl_1.P373</a></div>
                    </div>    
                </div>
        </form>
    </body>
</html>
